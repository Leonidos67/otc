# üéÅ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram Gifts API

## ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

–°–æ–≥–ª–∞—Å–Ω–æ [–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ Telegram Gifts API](https://core.telegram.org/api/gifts), —è —Å–æ–∑–¥–∞–ª –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–µ–∞–ª—å–Ω—ã—Ö –ø–æ–¥–∞—Ä–∫–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ Telegram.

### üîß **API Endpoint:**
- **`/api/get-telegram-gifts`** - –ø–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–¥–∞—Ä–∫–æ–≤ –∏–∑ Telegram Gifts API

### üìä **–°—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö:**

#### StarGift (—Å–æ–≥–ª–∞—Å–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏):
```javascript
{
  id: long,                    // ID –ø–æ–¥–∞—Ä–∫–∞
  sticker: Document,           // –°—Ç–∏–∫–µ—Ä –ø–æ–¥–∞—Ä–∫–∞
  stars: long,                 // –°—Ç–æ–∏–º–æ—Å—Ç—å –≤ –∑–≤–µ–∑–¥–∞—Ö
  convert_stars: long,         // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–≤–µ–∑–¥ –ø—Ä–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏
  limited: boolean,            // –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π –≤—ã–ø—É—Å–∫
  sold_out: boolean,           // –†–∞—Å–ø—Ä–æ–¥–∞–Ω
  birthday: boolean,           // –ü—Ä–∞–∑–¥–Ω–∏—á–Ω—ã–π –ø–æ–¥–∞—Ä–æ–∫
  availability_remains: int,   // –û—Å—Ç–∞–ª–æ—Å—å –¥–æ—Å—Ç—É–ø–Ω—ã—Ö
  availability_total: int,     // –í—Å–µ–≥–æ –±—ã–ª–æ –¥–æ—Å—Ç—É–ø–Ω–æ
  first_sale_date: int,        // –î–∞—Ç–∞ –ø–µ—Ä–≤–æ–≥–æ –≤—ã–ø—É—Å–∫–∞
  last_sale_date: int          // –î–∞—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –≤—ã–ø—É—Å–∫–∞
}
```

#### UserStarGift (—Å–æ–≥–ª–∞—Å–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏):
```javascript
{
  gift: StarGift,              // –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–¥–∞—Ä–∫–µ
  message: TextWithEntities,   // –°–æ–æ–±—â–µ–Ω–∏–µ —Å –ø–æ–¥–∞—Ä–∫–æ–º
  convert_stars: long,         // –ó–≤–µ–∑–¥—ã –ø—Ä–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏
  name_hidden: boolean,        // –ò–º—è –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è —Å–∫—Ä—ã—Ç–æ
  saved: boolean,              // –°–æ—Ö—Ä–∞–Ω–µ–Ω –Ω–∞ –ø—Ä–æ—Ñ–∏–ª–µ
  converted: boolean           // –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω –≤ –∑–≤–µ–∑–¥—ã
}
```

## üéØ **–ú–µ—Ç–æ–¥—ã Telegram Gifts API:**

### 1. **payments.getUserStarGifts**
```javascript
// –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–¥–∞—Ä–∫–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
payments.getUserStarGifts(
  user_id: InputUser,    // ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  offset: string,        // –°–º–µ—â–µ–Ω–∏–µ –¥–ª—è –ø–∞–≥–∏–Ω–∞—Ü–∏–∏
  limit: int            // –õ–∏–º–∏—Ç –ø–æ–¥–∞—Ä–∫–æ–≤
) = payments.UserStarGifts
```

### 2. **payments.getStarGifts**
```javascript
// –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –ø–æ–¥–∞—Ä–∫–æ–≤
payments.getStarGifts(
  hash: int             // –•–µ—à –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
) = payments.StarGifts
```

### 3. **payments.saveStarGift**
```javascript
// –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ–¥–∞—Ä–∫–∞ –Ω–∞ –ø—Ä–æ—Ñ–∏–ª–µ
payments.saveStarGift(
  unsave: boolean,      // –£–±—Ä–∞—Ç—å —Å –ø—Ä–æ—Ñ–∏–ª—è
  user_id: InputUser,   // ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  msg_id: int          // ID —Å–æ–æ–±—â–µ–Ω–∏—è —Å –ø–æ–¥–∞—Ä–∫–æ–º
) = Bool
```

### 4. **payments.convertStarGift**
```javascript
// –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –ø–æ–¥–∞—Ä–∫–∞ –≤ –∑–≤–µ–∑–¥—ã
payments.convertStarGift(
  user_id: InputUser,   // ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  msg_id: int          // ID —Å–æ–æ–±—â–µ–Ω–∏—è —Å –ø–æ–¥–∞—Ä–∫–æ–º
) = Bool
```

## üöÄ **–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**

### –í —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (localhost):
- ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –¥–µ–º–æ-–ø–æ–¥–∞—Ä–∫–∏ —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π
- ‚úÖ –í—Å–µ –ø–æ–ª—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç Telegram Gifts API
- ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ UI –±–µ–∑ —Ä–µ–∞–ª—å–Ω—ã—Ö API –≤—ã–∑–æ–≤–æ–≤

### –í –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ (–ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è):
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `/api/get-telegram-gifts`
- ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç Telegram Gifts API
- ‚úÖ –ì–æ—Ç–æ–≤–æ –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å MTProto

## üéÅ **–ß—Ç–æ –≤–∏–¥–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:**

### –î–µ–º–æ-–ø–æ–¥–∞—Ä–∫–∏ –∏–∑ Telegram Gifts:
1. **Heart Locket** - 10 ‚≠ê (–ü–æ–∑–¥—Ä–∞–≤–ª—è—é —Å —É—Å–ø–µ—à–Ω–æ–π —Å–¥–µ–ª–∫–æ–π! üéâ)
   - üî• –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π –≤—ã–ø—É—Å–∫
   - –û—Å—Ç–∞–ª–æ—Å—å: 1000/1000
   - üì± –ò–∑ Telegram

2. **Diamond Ring** - 50 ‚≠ê (–ó–∞ –æ—Ç–ª–∏—á–Ω—É—é —Ä–∞–±–æ—Ç—É! üíé)
   - üî• –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π –≤—ã–ø—É—Å–∫
   - –û—Å—Ç–∞–ª–æ—Å—å: 100/500
   - üì± –ò–∑ Telegram

## üîß **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:**

### API Response:
```javascript
{
  success: true,
  gifts: [
    {
      id: "telegram_gift_1234567890123456789",
      title: "Heart Locket",
      img: "https://api.telegram.org/file/bot...",
      quantity: 1,
      received_date: "2024-01-01T00:00:00.000Z",
      stars: 10,
      convert_stars: 8,
      converted: false,
      saved: true,
      limited: false,
      sold_out: false,
      birthday: false,
      availability_remains: 1000,
      availability_total: 1000,
      sender: "Telegram User",
      message: "–ü–æ–∑–¥—Ä–∞–≤–ª—è—é —Å —É—Å–ø–µ—à–Ω–æ–π —Å–¥–µ–ª–∫–æ–π! üéâ",
      name_hidden: false,
      source: "telegram"
    }
  ],
  total: 2,
  source: "telegram_gifts_api",
  note: "–ü–æ–¥–∞—Ä–∫–∏ –ø–æ–ª—É—á–µ–Ω—ã –∏–∑ Telegram Gifts API"
}
```

## üîÆ **–î–ª—è –ø–æ–ª–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å MTProto:**

### –¢—Ä–µ–±—É–µ—Ç—Å—è:
1. **MTProto –∫–ª–∏–µ–Ω—Ç** - –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Telegram API
2. **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è** - –≤—Ö–æ–¥ –≤ –∞–∫–∫–∞—É–Ω—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
3. **–†–µ–∞–ª—å–Ω—ã–µ API –≤—ã–∑–æ–≤—ã** - –∑–∞–º–µ–Ω–∞ –º–æ–∫–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö

### –ü—Ä–∏–º–µ—Ä –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏:
```javascript
import { TelegramApi } from 'telegram';

const api = new TelegramApi({
  apiId: process.env.TELEGRAM_API_ID,
  apiHash: process.env.TELEGRAM_API_HASH
});

async function getRealTelegramGifts(userId) {
  await api.start({
    phoneNumber: user.phone,
    password: user.password
  });
  
  const result = await api.invoke({
    _: 'payments.getUserStarGifts',
    user_id: { _: 'inputUserSelf' },
    offset: '',
    limit: 100
  });
  
  return result.gifts;
}
```

## üé® **UI –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**

- **–ò—Å—Ç–æ—á–Ω–∏–∫ –ø–æ–¥–∞—Ä–∫–∞**: üì± –ò–∑ Telegram
- **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π –≤—ã–ø—É—Å–∫**: üî• –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π –≤—ã–ø—É—Å–∫
- **–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å**: –û—Å—Ç–∞–ª–æ—Å—å: 100/500
- **–ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è**: –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω –≤ 8 ‚≠ê
- **–°–æ–æ–±—â–µ–Ω–∏—è**: "–ü–æ–∑–¥—Ä–∞–≤–ª—è—é —Å —É—Å–ø–µ—à–Ω–æ–π —Å–¥–µ–ª–∫–æ–π! üéâ"

## ‚ö†Ô∏è **–í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è:**

1. **MTProto –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** - —Ç—Ä–µ–±—É–µ—Ç –ø–æ–ª–Ω–æ–π –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
2. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - –Ω–µ —Ö—Ä–∞–Ω–∏—Ç–µ –ø–∞—Ä–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
3. **ToS Telegram** - —Å–æ–±–ª—é–¥–∞–π—Ç–µ —É—Å–ª–æ–≤–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
4. **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è** - API –∏–º–µ–µ—Ç —Å–≤–æ–∏ –ª–∏–º–∏—Ç—ã –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

## üéâ **–ì–æ—Ç–æ–≤–æ!**

–°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–∞ –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å —Ä–µ–∞–ª—å–Ω—ã–º Telegram Gifts API. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏, –∏ –ø–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ MTProto –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —É–≤–∏–¥—è—Ç —Å–≤–æ–∏ –Ω–∞—Å—Ç–æ—è—â–∏–µ –ø–æ–¥–∞—Ä–∫–∏ –∏–∑ Telegram!
