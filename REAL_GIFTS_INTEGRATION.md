# üéÅ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –Ω–∞—Å—Ç–æ—è—â–∏–º–∏ –ø–æ–¥–∞—Ä–∫–∞–º–∏ Telegram

## –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –≤—ã **–ù–ï** —É–≤–∏–¥–∏—Ç–µ –Ω–∞—Å—Ç–æ—è—â–∏–µ –ø–æ–¥–∞—Ä–∫–∏, –ø–æ—Ç–æ–º—É —á—Ç–æ:

1. **Bot API –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è** - Bot API –Ω–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –¥–æ—Å—Ç—É–ø –∫ –ø–æ–¥–∞—Ä–∫–∞–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
2. **–ú–æ–∫–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ** - API endpoint –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
3. **–ù—É–∂–µ–Ω MTProto** - –¥–ª—è —Ä–µ–∞–ª—å–Ω—ã—Ö –ø–æ–¥–∞—Ä–∫–æ–≤ —Ç—Ä–µ–±—É–µ—Ç—Å—è MTProto API

## üöÄ –†–µ—à–µ–Ω–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –Ω–∞—Å—Ç–æ—è—â–∏—Ö –ø–æ–¥–∞—Ä–∫–æ–≤

### –í–∞—Ä–∏–∞–Ω—Ç 1: MTProto –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (—Å–ª–æ–∂–Ω–æ)

```javascript
// –ü—Å–µ–≤–¥–æ–∫–æ–¥ –¥–ª—è MTProto –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
import { TelegramApi } from 'telegram';

const api = new TelegramApi({
  apiId: process.env.TELEGRAM_API_ID,
  apiHash: process.env.TELEGRAM_API_HASH
});

async function getUserRealGifts(userId) {
  // –í—Ö–æ–¥ –≤ –∞–∫–∫–∞—É–Ω—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  await api.start({
    phoneNumber: user.phone,
    password: user.password // 2FA –ø–∞—Ä–æ–ª—å
  });
  
  // –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–¥–∞—Ä–∫–æ–≤
  const result = await api.invoke({
    _: 'payments.getUserStarGifts',
    user_id: { _: 'inputUserSelf' },
    offset: '',
    limit: 100
  });
  
  return result.gifts;
}
```

**–ü—Ä–æ–±–ª–µ–º—ã:**
- –ù—É–∂–Ω—ã —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –°–ª–æ–∂–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö
- –°–æ–±–ª—é–¥–µ–Ω–∏–µ ToS Telegram

### –í–∞—Ä–∏–∞–Ω—Ç 2: Webhook –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```javascript
// –ù–∞—Å—Ç—Ä–æ–π–∫–∞ webhook –≤ –±–æ—Ç–µ
const webhookUrl = 'https://yourdomain.com/api/telegram-webhook';

// –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Ö–æ–¥—è—â–∏—Ö –ø–æ–¥–∞—Ä–∫–æ–≤
app.post('/api/telegram-webhook', (req, res) => {
  const update = req.body;
  
  if (update.message && update.message.service) {
    const serviceMessage = update.message.service;
    
    if (serviceMessage.action._ === 'messageActionStarGift') {
      // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∏–ª –ø–æ–¥–∞—Ä–æ–∫
      const gift = serviceMessage.action.gift;
      const userId = update.message.from.id;
      
      // –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø–æ–¥–∞—Ä–æ–∫ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
      saveUserGift(userId, gift);
    }
  }
  
  res.status(200).send('OK');
});
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –°–æ–±—Å—Ç–≤–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø–æ–¥–∞—Ä–∫–æ–≤

```javascript
// –°–æ–∑–¥–∞—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—É—é —Å–∏—Å—Ç–µ–º—É –ø–æ–¥–∞—Ä–∫–æ–≤
const userGifts = {
  [userId]: [
    {
      id: 'custom_1',
      title: 'Custom Gift',
      img: '/images/gift1.png',
      stars: 10,
      received_date: new Date(),
      sender: 'Friend Name'
    }
  ]
};
```

## üõ† –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —à–∞–≥–∏

### –î–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è:

1. **–°–æ–∑–¥–∞—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—É—é —Å–∏—Å—Ç–µ–º—É –ø–æ–¥–∞—Ä–∫–æ–≤**
2. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å webhook –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø–æ–¥–∞—Ä–∫–æ–≤**
3. **–ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è —Å Telegram Bot API –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π**

### –î–ª—è –ø–æ–ª–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏:

1. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å MTProto –∫–ª–∏–µ–Ω—Ç**
2. **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω—É—é –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é**
3. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `payments.getUserStarGifts`**

## üìã –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ:
- –û—Å—Ç–∞–≤–∏—Ç—å –º–æ–∫–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
- –î–æ–±–∞–≤–∏—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–æ–∑–¥–∞–Ω–∏—è —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ø–æ–¥–∞—Ä–∫–æ–≤
- –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è —Å Telegram Bot API –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

### –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ:
- –ò–∑—É—á–∏—Ç—å MTProto API
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω—É—é –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é
- –°–æ–±–ª—é–¥–∞—Ç—å –≤—Å–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è Telegram

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –ù–∏–∫–æ–≥–¥–∞ –Ω–µ —Ö—Ä–∞–Ω–∏—Ç–µ –ø–∞—Ä–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
2. **ToS**: –°–æ–±–ª—é–¥–∞–π—Ç–µ —É—Å–ª–æ–≤–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è Telegram
3. **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è**: MTProto API –∏–º–µ–µ—Ç —Å–≤–æ–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
4. **–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã**: –†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã –ø–æ–¥–∞—Ä–∫–æ–≤

## üîó –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [Telegram Gifts API](https://core.telegram.org/api/gifts)
- [MTProto API](https://core.telegram.org/api)
- [Telegram Bot API](https://core.telegram.org/bots/api)
- [Telegram ToS](https://telegram.org/tos)
